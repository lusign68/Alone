var c,e;function f(a,b){this.x=a;this.y=b}function g(a){return new f(a.x,a.y)}f.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};function k(a,b){a.x-=b.x;a.y-=b.y;return a}function l(a,b){a.x/=b;a.y/=b;return a}f.prototype.multiply=function(a){this.x*=a.x;this.y*=a.y;return this};function n(a,b){a.x*=b;a.y*=b;return a}function p(a,b){return a.x*b.x+a.y*b.y}f.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};
f.prototype.random=function(){this.x*=Math.random();this.y*=Math.random();return this};f.prototype.bound=function(a,b,q){if(this[a]<b)this[a]=Math.min(q,2*b-this[a]);else if(this[a]>q)this[a]=Math.max(b,2*q-this[a]);else return!0};
function r(a){a||(a={});this.i=a.i||"#"+Array(4).join((40+Math.floor(60*Math.random())).toString(16));this.a=a.a||20;this.b=a.b||new f(0,0);this.f=a.f||1;this.g=2*this.a;this.c=this.a*this.a*this.f;this.coords=a.coords||k((new f(500,500)).random(),Sun.coords);t.push(this)}var u=document.getElementsByTagName("canvas")[0],v=u.getContext("2d"),x=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/60)};
function y(){v.restore();v.save();v.clearRect(0,0,u.width,u.height);v.translate(u.width/2,u.height/2);v.scale(z,z);for(var a=t.length;a--;){var b=t[a];b.j?(v.save(),v.rotate(b.angle+Math.PI/2),v.drawImage(A,-B.a,-B.a,B.g,B.g),v.restore()):(v.beginPath(),v.fillStyle=b.i,v.arc(b.coords.x-B.coords.x,b.coords.y-B.coords.y,b.a,0,2*Math.PI),v.fill())}x(y)}window.onresize=function(){u.width=window.innerWidth;u.height=window.innerHeight};window.onkeydown=function(a){a=a||window.event;C[a.keyCode]=!0};
window.onkeyup=function(a){a=a||window.event;C[a.keyCode]=!1};window.onwheel=function(a){if(E)return!0;E=!0;z*=0<(a.wheelDelta||-1*event.deltaY)?1.5:.5;setTimeout(function(){E=!1},200);return!0};var C={},z=.5,E,A=new Image;A.src="player.svg";var t=[],F=new r({a:1E4,f:1,coords:new f(100,100)}),B=new r({a:10,coords:new f(250,100)});B.angle=0;B.speed=1.5*F.c/F.a/F.a;B.h=.03;B.j=!0;
for(e=1E3;e--;){var G=F.g+5E3*Math.random();c=2*Math.random()*Math.PI;var H=c+Math.PI/2;new r({a:5+Math.ceil(10*Math.random()),coords:n(new f(Math.cos(c),Math.sin(c)),G),b:n(new f(Math.cos(H),Math.sin(H)),Math.sqrt(1*F.c/G))})}
for(var I=document.getElementsByClassName("row"),J=document.getElementById("slider"),K=2;K--;)for(var M=e=0;4>M;M++)for(c=document.createElement("div"),c.className="angle bearing",c.textContent=["N","E","S","W"][M],I[K].appendChild(c);e++<9*M+8;)c=document.createElement("div"),c.className="angle",c.textContent=10*e,I[K].appendChild(c);onresize();x(y);
setInterval(function(){for(var a=t.length;a--;){for(var b=t[a],q=a;q--;){var d=t[q],h=k(g(b.coords),d.coords),m=p(h,h);h=l(g(h),Math.sqrt(p(h,h)));var w=(b.a+d.a)*(b.a+d.a);if(m)if(m<w){if(b.b.x||b.b.y||d.b.x||d.b.y){w=n(g(h),2*p(b.b,h));var D=n(g(h),p(d.b,h)),L=l(n(g(w),b.c).add(n(g(D),d.c-b.c)),d.c+b.c);k(b.b.add(L).add(D),w);k(d.b.add(L),D)}m=n(h,(b.a+d.a-Math.sqrt(m))/(b.c+d.c));b.coords.add(n(g(m),d.c));k(d.coords,n(m,b.c))}else m!==w&&(k(b.b,n(g(h),1*d.c/m)),d.b.add(n(g(h),1*b.c/m)))}b.coords.add(b.b);
n(b.b,1)}C[37]&&(B.angle-=B.h);C[38]&&B.b.add(n(new f(Math.cos(B.angle),Math.sin(B.angle)),B.speed));C[39]&&(B.angle+=B.h);J.style.right=(100*((B.angle-Math.PI/2)/2/Math.PI%1+1)+1.3888)%100+"%"},1E3/60);
