var c,d,f;function g(a,b){this.x=a;this.y=b}function h(a){return new g(a.x,a.y)}g.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};function k(a,b){a.x-=b.x;a.y-=b.y;return a}function p(a,b){a.x/=b;a.y/=b;return a}g.prototype.multiply=function(a){this.x*=a.x;this.y*=a.y;return this};function q(a,b){a.x*=b;a.y*=b;return a}function r(a,b){return a.x*b.x+a.y*b.y}function t(a){return p(h(a),Math.sqrt(r(a,a)))}g.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};
function u(a){c=a.x;a.x=a.y;a.y=-c;return a}g.prototype.random=function(){this.x*=Math.random();this.y*=Math.random();return this};g.prototype.bound=function(a,b,m){if(this[a]<b)this[a]=Math.min(m,2*b-this[a]);else if(this[a]>m)this[a]=Math.max(b,2*m-this[a]);else return!0};g.prototype.angle=function(a){return Math.acos(r(this,a)/(Math.sqrt(r(this,this))*Math.sqrt(r(a,a))))};
function v(a){a||(a={});this.i=a.i||"#"+Array(4).join((40+Math.floor(60*Math.random())).toString(16));this.a=a.a||20;this.b=a.b||new g(0,0);this.g=a.g||1;this.f=2*this.a;this.c=this.a*this.a*this.a*this.g;this.coords=a.coords||k((new g(500,500)).random(),Sun.coords);x.push(this)}function y(a){var b=z,m=k(h(a.coords),b.coords);a.b=h(b.b).add(q(t(u(m)),-1*Math.sqrt(b.c*A/Math.sqrt(r(m,m)))))}
var B=document.getElementsByTagName("canvas")[0],C=B.getContext("2d"),D=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/30)};
function E(){C.restore();C.save();C.clearRect(0,0,B.width,B.height);C.translate(B.width/2,B.height/2);C.scale(G,G);C.rotate(-Math.PI/2-H.angle);for(var a=x.length;a--;){var b=x[a];b.j?(C.save(),C.rotate(b.angle+Math.PI/2),I[38]&&C.drawImage(J,-b.a,8-b.a,b.f,2*b.f),C.drawImage(K,-b.a,-b.a,b.f,b.f),C.restore()):(C.beginPath(),C.fillStyle=b.i,C.arc(b.coords.x-H.coords.x,b.coords.y-H.coords.y,b.a,0,2*Math.PI),C.fill())}D(E)}window.onresize=function(){B.width=window.innerWidth;B.height=window.innerHeight};
window.onkeydown=function(a){a=a||window.event;I[a.keyCode]=!0};window.onkeyup=function(a){a=a||window.event;I[a.keyCode]=!1};window.onwheel=function(a){G*=0<(a.wheelDelta||-1*event.deltaY)?L:1/L};var I={},G=1,L=1.2,K=new Image;K.src="ship.svg";var J=new Image;J.src="flame.svg";var x=[],A=.011,z=new v({a:6371,g:1,coords:new g(100,100)});f=384405;y(new v({a:1738,coords:new g(0,f)}));var H=new v({a:10,coords:new g(z.a+4E4,0)});y(H);H.angle=0;H.speed=10;H.h=.05;H.j=!0;
for(d=500;d--;)f=4*z.f+5E4*Math.random(),y(new v({a:5+Math.ceil(10*Math.random()),coords:q(new g(Math.cos(c),Math.sin(c)),f)}));for(var M=document.getElementsByClassName("row"),N=document.getElementById("slider"),P=2;P--;)for(var Q=d=0;4>Q;Q++)for(c=document.createElement("div"),c.className="angle bearing",c.textContent=["N","E","S","W"][Q],M[P].appendChild(c);d++<9*Q+8;)c=document.createElement("div"),c.className="angle",c.textContent=10*d,M[P].appendChild(c);onresize();D(E);
setInterval(function(){for(var a=x.length;a--;){for(var b=x[a],m=a;m--;){var e=x[m],l=k(h(b.coords),e.coords),n=r(l,l);l=t(l);var w=(b.a+e.a)*(b.a+e.a);if(n)if(n<w){if(b.b.x||b.b.y||e.b.x||e.b.y){w=q(h(l),2*r(b.b,l));var F=q(h(l),r(e.b,l)),O=p(q(h(w),b.c).add(q(h(F),e.c-b.c)),e.c+b.c);k(b.b.add(O).add(F),w);k(e.b.add(O),F)}n=q(l,(b.a+e.a-Math.sqrt(n))/(b.c+e.c));b.coords.add(q(h(n),e.c));k(e.coords,q(n,b.c))}else n!==w&&(k(b.b,q(h(l),A*e.c/n)),e.b.add(q(h(l),A*b.c/n)))}b.coords.add(b.b);q(b.b,1)}I[37]&&
(H.angle-=H.h);I[38]&&H.b.add(q(new g(Math.cos(H.angle),Math.sin(H.angle)),H.speed));I[39]&&(H.angle+=H.h);N.style.right=(100*((H.angle-Math.PI/2)/2/Math.PI%1+1)+1.3888)%100+"%"},1E3/60);