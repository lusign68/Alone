var c,e,f;function g(a,b){this.x=a;this.y=b}function k(a){return new g(a.x,a.y)}c=g.prototype;c.add=function(a){this.x+=a.x;this.y+=a.y;return this};function m(a,b){a.x-=b.x;a.y-=b.y;return a}function p(a,b){a.x/=b;a.y/=b;return a}c.multiply=function(a){this.x*=a.x;this.y*=a.y;return this};function q(a,b){a.x*=b;a.y*=b;return a}function r(a,b){return a.x*b.x+a.y*b.y}function t(a){return Math.sqrt(r(a,a))}function u(a){return p(k(a),t(a))}
c.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};c.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y)};function v(a){e=a.x;a.x=a.y;a.y=-e;return a}c.random=function(){this.x*=Math.random();this.y*=Math.random();return this};c.bound=function(a,b,h){if(this[a]<b)this[a]=Math.min(h,2*b-this[a]);else if(this[a]>h)this[a]=Math.max(b,2*h-this[a]);else return!0};c.angle=function(a){return Math.acos(r(this,a)/(t(this)*t(a)))};
function w(a){a||(a={});this.f=a.f||"#"+Array(4).join((100+Math.floor(60*Math.random())).toString(16));this.a=a.a||20;this.b=a.b||new g(0,0);this.g=a.g||1;this.h=2*this.a;this.c=4/3*Math.PI*this.a*this.a*this.a*this.g;this.coords=a.coords||(new g(500,500)).random();x.push(this)}function y(a,b,h){if(h){var d=2*Math.random()*Math.PI;a.coords=k(b.coords).add(q(new g(Math.cos(d),Math.sin(d)),h))}h=m(k(a.coords),b.coords);a.b=k(b.b).add(q(u(v(h)),-1*Math.sqrt(b.c*z/t(h))))}
var B=document.getElementsByTagName("canvas")[0],C=document.getElementById("speed"),D=B.getContext("2d"),E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/30)};
function F(){D.restore();D.save();D.clearRect(0,0,B.width,B.height);D.translate(B.width/2,B.height/2);D.scale(G,G);D.rotate(-Math.PI/2-I.angle);for(var a=x.length;a--;){var b=x[a];b.j?(D.save(),D.rotate(b.angle+Math.PI/2),J[38]&&D.drawImage(K,-b.a,-80+b.a,b.h,2*b.h),D.drawImage(L,-b.a,-80-b.a,b.h,2*b.h),D.fillStyle="red",D.arc(0,0,b.a,0,2*Math.PI),D.restore()):(D.beginPath(),D.fillStyle=b.f,D.arc(b.coords.x-I.coords.x,b.coords.y-I.coords.y,b.a,0,2*Math.PI),D.fill())}E(F)}
window.onresize=function(){B.width=window.innerWidth;B.height=window.innerHeight};window.onkeydown=function(a){a=a||window.event;J[a.keyCode]=!0};window.onkeyup=function(a){a=a||window.event;J[a.keyCode]=!1};window.onwheel=function(a){G*=0<(a.wheelDelta||-1*event.deltaY)?M:1/M};var J={},G=1,M=1.2,L=new Image;L.src="ship.svg";var K=new Image;K.src="flame.svg";
var x=[],z=6.67408E-11,sun=new w({a:6957E5,coords:new g(0,0),g:1408,f:"yellow"}),N=new w({a:6371E3,g:5514,f:"#4E71B2"}),O=new w({a:6051800,g:5243,f:"orange"}),Q=new w({a:1737E3,g:3344,f:"grey"});y(N,sun,1496E8);y(O,sun,10821E7);y(Q,N,384405E3);var I=new w({a:56,coords:k(N.coords).add(new g(N.a+57,0))});I.b=k(N.b);I.angle=0;I.l=z*N.c/(N.a*N.a)*3;I.i=.05;I.j=!0;f=500;for(var R=5*N.h;f--;)y(new w({a:2E4+Math.ceil(5E4*Math.random())}),N,5*N.h+Math.random()*R);
for(var S=document.getElementsByClassName("row"),T=document.getElementById("slider"),U=2;U--;)for(var V=f=0;4>V;V++)for(e=document.createElement("div"),e.className="angle bearing",e.textContent=["W","N","E","S"][V],S[U].appendChild(e);f++<9*V+8;)e=document.createElement("div"),e.className="angle",e.textContent=10*f,S[U].appendChild(e);onresize();E(F);
setInterval(function(){for(var a=x.length;a--;){for(var b=x[a],h=a;h--;){var d=x[h],l=m(k(b.coords),d.coords),n=r(l,l);if(n){var A=(b.a+d.a)*(b.a+d.a);l=u(l);if(n<A){if(b.b.x||b.b.y||d.b.x||d.b.y){A=q(k(l),2*r(b.b,l));var H=q(k(l),r(d.b,l)),P=p(q(k(A),b.c).add(q(k(H),d.c-b.c)),d.c+b.c);m(b.b.add(P).add(H),A);m(d.b.add(P),H)}n=q(l,(b.a+d.a-Math.sqrt(n))/(b.c+d.c));b.coords.add(q(k(n),d.c));m(d.coords,q(n,b.c))}else n!==A&&(m(b.b,q(k(l),z*d.c/n)),d.b.add(q(l,z*b.c/n)))}}b.coords.add(p(k(b.b),60));q(b.b,
1)}J[37]&&(I.angle-=I.i);J[38]&&I.b.add(q(new g(Math.cos(I.angle),Math.sin(I.angle)),I.l));J[39]&&(I.angle+=I.i);T.style.right=(100*((I.angle-Math.PI/2)/2/Math.PI%1+1)+1.3888)%100+"%";C.textContent=Math.round(t(m(k(I.b),N.b)))},1E3/60);